Configurar Red
===============

Despues de instalar Centos se debe configurar los adaptadores de red. Se configura en la siguiente ruta::

	/etc/sysconfig/network-scritps

Deben existir tantos archivos con el nombre de ifcfg-adaptador, como adaptadores fisicos.::

	ifcfg-eth0

	ifcfg-lo

Procedemos a editar el fichero ifcfg-adaptador.

IP Estatica
-----------
::

	DEVICE="eth0"
	HWADDR="00:2C:C1:9E:EA:7B"
	NM_CONTROLLED="yes"
	ONBOOT="yes"
	BOOTPROTO="static"

	IPADDR=10.10.0.10
	NETMASK=255.255.255.0
	GATEWAY=10.10.1.1
	TYPE=Ethernet


HWADDR Es la mac de la tarjeta de red que vamos a configurar.
ONBOOT Es para decirle al sistema que encienda la tarjeta de red al inicio de este.
BOOTPROTO Podemos indicarle static, none , dhcp dependiendo la configuracion que deseemos.
Lo que hay debajo es directamente los comandos necesarios para decirle que ip, mascara y puerta de enlace queremos que tenga nuestra tarjeta de red.
 
IP Dinámica
-----------

Si por ejemplo la quisiéramos configurar como DHCP tan solo seria necesario indicar lo siguiente en el archivo de configuración.::

	DEVICE="eth0"
	HWADDR="00:2C:C1:9E:EA:7B"
	NM_CONTROLLED="yes"
	ONBOOT="yes"
	BOOTPROTO="dhcp"
 
Configurando servidores DNS
----------------------------

Configurar las DNS en el archivo /etc/resolv.conf::

	nameserver 8.8.8.8
	nameserver 8.8.8.4
	nameserver 208.67.222.123
	nameserver 208.67.220.123
 
Activando las tarjetas de red
-------------------------------

Reiniciamos el servicio para todos los adaptadores.::

/etc/init.d/network restart

O reiniciamos el servicio de un adaptador en especifico.::

	ifdown eth1

	ifup eth1

 
El dispositivo eth0 no parece estar presente  o cambiamos fisicamente el adaptador
------------------------------------------------------------------------------------

Esto sucede muncho cuando cambiamos un adaptador de red por otro y la ma-address por logica cambia, debemos corregirlo de forma manual.
Con lspci ( yum install pciutils ) y revisamos.::

	# lspci | grep -i ethernet
	01:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8101E/RTL8102E PCI Express Fast Ethernet controller (rev 02)
	04:00.0 Ethernet controller: VIA Technologies, Inc. VT6105/VT6106S [Rhine-III] (rev 86)

Tambien podemos revisar.::

	# ls /sys/class/net/
	eth0  eth1  lo

Editamos los UDEV en el archivo /etc/udev/rules.d/70-persistent-net.rules y vemos la MAC de la tarjeta de red y el nombre esten coherentes con el archivo ifcfg-eth que tenemos en /etc/sysconfig/network-scripts.::

	# This file was automatically generated by the /lib/udev/write_net_rules
	# program, run by the persistent-net-generator.rules rules file.
	#
	# You can modify it, as long as you keep each rule on a single
	# line, and change only the value of the NAME= key.

	# PCI device 0x10ec:0x8136 (r8169)
	SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="00:2C:C1:9E:EA:7B", ATTR{type}=="1", KERNEL=="eth*", NAME="eth0"

	# PCI device 0x10ec:0x8139 (8139too)
	SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="00:40:95:30:19:a5", ATTR{type}=="1", KERNEL=="eth*", NAME="eth1"

	# PCI device 0x1106:0x3106 (via-rhine)
	SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="00:C0:fC:7B:8C:f4", ATTR{type}=="1", KERNEL=="eth*", NAME="eth2"

En este caso se puede observar que existe eth0, eth1 y eth2, pero la eth1 ya no esta fisicamente y la eth2 fue la que reemplazamos y ella deberia ser la eth1 ahora.::

	# This file was automatically generated by the /lib/udev/write_net_rules
	# program, run by the persistent-net-generator.rules rules file.
	#
	# You can modify it, as long as you keep each rule on a single
	# line, and change only the value of the NAME= key.

	# PCI device 0x10ec:0x8136 (r8169)
	SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="00:2C:C1:9E:EA:7B", ATTR{type}=="1", KERNEL=="eth*", NAME="eth0"

	# PCI device 0x1106:0x3106 (via-rhine)
	SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="00:C0:fC:7B:8C:f4", ATTR{type}=="1", KERNEL=="eth*", NAME="eth1"

Verificamos el archivo ifcfg-eth1 la mac-address y debemos corregirla, debe ser igual a la que modificamos en UDEV, ethtool -P eth1, devolverá la direccion MAC de la tarjeta de red.::

	DEVICE="eth1"
	HWADDR="00:C0:fC:7B:8C:f4"
	NM_CONTROLLED="yes"
	ONBOOT="yes"
	BOOTPROTO="dhcp"

 
Ahora pasamos con el enrutamiento, IPTables para configurar el Firewall y el SElinux.
